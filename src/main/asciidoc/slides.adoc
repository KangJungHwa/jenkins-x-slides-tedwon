:toc:

= Jenkins X

automated CI/CD solution for cloud native applications on Kubernetes

https://jenkins-x.io/

tedwon <jwon@redhat.com>

//image::jbugkorea_logotype_600px.gif[background, size=cover]


:icons: font
//:source-highlighter: prettify
//:source-highlighter: highlightjs
//:source-highlighter: coderay
//:coderay-css: style

ifndef::imagesdir[:imagesdir: images]
ifndef::sourcedir[:sourcedir: ../../main/java]


[transition=zoom, %notitle]
[background-color="red"]
== I am a Red Hat JBoss Senior SME at Seoul


[transition-speed=fast, %notitle]
[background-color="red"]
== Software Maintenance Engineer


== Jenkins vs Jenkis X

== Jenkins

//[%step]
* https://jenkins.io/

image::jenkins.png[width="300"]


== Jenkins X

//[%step]
* https://jenkins-x.io/

image::jenkinsx.png[width="300"]


== Transformation of Development Platform

//[%step]
* Move from on premise to cloud
* Move from VMs to containers
* Immutable infrastructure for DevOps
* Kubernetes has become the defacto standard
* Move from monoliths to microservices
* Become high performing teams via CI/CD


== What are the challenges?

//[%step]
* How do I migrate my applications to the cloud?
* How do dev teams work with Kubernetes?
* What do I need to start developing, building and deploying?
* How do I wire everything together?
* How do I access my applications?


== Started by James Strachan

image::jstrachan.png[width="400"]


== Started by James Strachan

//[%step]
* Released at March of this year, 2018
** https://twitter.com/jstrachan/status/975796722147438598
** https://goo.gl/ceLcmq
** https://github.com/jenkins-x/jx/graphs/contributors
* Founder of Groovy, Apache ActiveMQ/Camel
*** https://www.linkedin.com/in/jstrachan/
*** https://medium.com/@jstrachan


== Started by James Strachan

//[%step]
* Developed similar project in Red Hat until last year, 2017
** https://goo.gl/4re3G7
* gofabric8
** https://github.com/fabric8io/gofabric8
*** http://fabric8.io/


== Features of Jenkins X

//[%step]
* Automated CI and CD
* Environment Promotion via GitOps
* Pull Request Preview Environments
* Feedback on Issues and Pull Requests


[NOTE.speaker]
--
* Automated CI and CD
** Rather than having to have deep knowledge of the internals of Jenkins Pipeline, Jenkins X will default awesome pipelines for your projects that implements fully CI and CD

* Environment Promotion via GitOps
** Each team gets a set of Environments. Jenkins X then automates the management of the Environments and the Promotion of new versions of Applications between Environments via GitOps

* Pull Request Preview Environments
** Jenkins X automatically spins up Preview Environments for your Pull Requests so you can get fast feedback before changes are merged to master

* Feedback on Issues and Pull Requests
** Jenkins X automatically comments on your Commits, Issues and Pull Requests with feedback as code is ready to be previewed, is promoted to environments or if Pull Requests are generated automatically to upgrade versions.
--


== Supported Cloud Providers

----
jx help create cluster
----

//[%step]
* Google Container Engine
* OpenShift
* Amazon Elastic Container Service
* Azure Container Service
* IBM Cloud Kubernetes Service
* Oracle Cloud Container Engine
** https://jenkins-x.io/commands/jx_create_cluster/

[NOTE.speaker]
--
* aks (Azure Container Service - https://docs.microsoft.com/en-us/azure/aks)
* aws (Amazon Web Services via kops - https://github.com/aws-samples/aws-workshop-for-kubernetes/blob/master/readme.adoc)
* eks (Amazon Web Services Elastic Container Service for Kubernetes - https://docs.aws.amazon.com/eks/latest/userguide/getting-started.html)
* gke (Google Container Engine - https://cloud.google.com/kubernetes-engine)
* iks (IBM Cloud Kubernetes Service - https://console.bluemix.net/docs/containers)
* oke (Oracle Cloud Infrastructure Container Engine for Kubernetes - https://docs.cloud.oracle.com/iaas/Content/ContEng/Concepts/contengoverview.htm)
* kubernetes for custom installations of Kubernetes
* minikube (single-node Kubernetes cluster inside a VM on your laptop)
* minishift (single-node OpenShift cluster inside a VM on your laptop)
* openshift for installing on 3.9.x or later clusters of OpenShift
--


== How does Jenkins X help?

//[%step]
* Jenkins
** CI/CD pipeline solution
* Nexus
** Artifact repository
* https://helm.sh
** Package manager for Kubernetes
* Chartmuseum
** Helm Chart repository


== How does Jenkins X help?

//[%step]
* Monocular
** Web UI for helm charts
* https://draft.sh
* Skaffold

[NOTE.speaker]
--
* Jenkins
** CI/CD pipeline solution
* Nexus
** Artifact repository
* https://helm.sh
** Package manager for Kubernetes
* Chartmuseum
** Helm Chart repository
* Monocular
** Web UI for helm charts
* https://draft.sh
** build packs used to bootstrap applications so they build and run on Kubernetes
* Skaffold
** Tool for building docker images on kubernetes clusters and then deploying/upgrading them via kubectl or helm
--

== Helm Chart

* Helm Chart is a packaging format. 
* A chart is a collection of files that describe a related set of Kubernetes resources.
----
~/demo/charts/demo(master) » tree .
.
├── Chart.yaml
├── Makefile
├── README.md
├── charts
├── templates
│   ├── NOTES.txt
│   ├── _helpers.tpl
│   ├── deployment.yaml
│   └── service.yaml
└── values.yaml
----


[%notitle]
== Jenkins UI

image::jenkins-env.png[background, size=cover]


[%notitle]
== Jenkins Blue Ocean UI

image::jenkins-blue-ocean.png[background, size=cover]


[%notitle]
== Jenkins Blue Ocean UI

image::jenkins-blue-ocean-pipeline.png[background, size=cover]


[%notitle]
== Nexus UI

image::nexus.png[background, size=cover]


[%notitle]
== Monocular UI

image::monocular.png[background, size=cover]


== How does Jenkins X help?

----
jx open

jenkins                   http://jenkins.jx.35.200.29.158.nip.io
jenkins-x-chartmuseum     http://chartmuseum.jx.35.200.29.158.nip.io
jenkins-x-docker-registry http://docker-registry.jx.35.200.29.158.nip.io
jenkins-x-monocular-ui    http://monocular.jx.35.200.29.158.nip.io
nexus                     http://nexus.jx.35.200.29.158.nip.io
----

* Jenkins http://jenkins.jx.35.200.29.158.nip.io
* Nexus http://nexus.jx.35.200.29.158.nip.io
* Monocular http://monocular.jx.35.200.29.158.nip.io


== Environment Promotion via GitOps

----
jx env
? Pick environment:  [Use arrows to move, type to filter]
> dev
  production
  staging
----

//[%step]
* Development Environment
* Staging Environment
* Production Environment


[%notitle]
== Environments in Kubernetes

image::gitops.png[]


[%notitle]
== jx Overview

image::jx-overview.png[canvas,size=contain]


[%notitle]
=== Jenkins X Architecture

image::jx-arch.png[canvas,size=contain]


== How do we setup Kubernetes + Jenkins X?

* Install the jx command line tool
** http://jenkins-x.io/getting-started/install/

----
macOs:
brew tap jenkins-x/jx
brew install jx

linux:
curl -L https://github.com/jenkins-x/jx/releases/download/v1.3.467/jx-darwin-amd64.tar.gz | tar xzv 
sudo mv jx /usr/local/bin
----

== How do we setup Kubernetes + Jenkins X?

* If using the public cloud use:
----
jx create cluster aws
jx create cluster gke
jx create cluster aks
----

== How do we setup Kubernetes + Jenkins X?


* If you have a cluster already - ensure RBAC enabled then:
----
jx install --provider=openshift
----


== jx Commands

* jx command line tool
* https://jenkins-x.io/commands/jx/

----
jx help
----

== Demo

== Demo Overview

//[%step]
* Step 1. Install jx
** https://jenkins-x.io/getting-started/install/ 
* Step 2. Create Cluster GKE
** https://jenkins-x.io/demos/create_cluster_gke/ 
* Step 3. Create Cloud App: Spring Boot
** http://jenkins-x.io/demos/create_spring/
* Step 4. Import Cloud App: Vert.x


== Demo - Step 2. Create Cluster GKE

----
jx create cluster minikube
jx create cluster minishift
jx create cluster gke
----

== Demo - Step 2. Create Cluster GKE

* Record: https://asciinema.org/a/209189
** https://github.com/tedwon/jenkins-x-slides-tedwon/blob/master/src/main/asciidoc/demo.adoc[demo.adoc]
** https://cloud.google.com/kubernetes-engine
[source,bash,options="nowrap"]
----
jx create cluster gke --cluster-name jwon-k8s-cluster-1030 --username admin --default-admin-password admin123! --verbose=true --log-level debug
----

== Demo - Step 3. Create Cloud App: Spring Boot

----
jx create spring -d web -d actuator
----

//[%step]
* Automatically set up CI/CD pipelines for new + imported projects
* Setups up git repository
* Adds webhooks on git to trigger Jenkins pipelines on PR / master
* Triggers the first pipeline


== Demo & Environment Git Repository

image::demo-env-git-repository.png[]


== Jenkins X on Pull Request

//[%step]
* Builds and tests
* Creates preview docker image + helm chart
* Creates a Preview Environment and comments on the PR with the link


== Jenkins X on Release (push to master)

//[%step]
* Builds and tests
* Creates semantic release version
* Publishes versioned artifacts, docker image & helm chart


== Jenkins X promotion via GitOps

//[%step]
* Each environment stores its configuration as helm charts in a git repository
** Reuse the Pull Request workflow for changes
* To promote a version to, say, Production Jenkins X submits a Pull Request
** The Promote step waits for the Pull Request CI build to complete


== Demo - Step 4. Import Cloud App: Vert.x

* https://asciinema.org/a/209189
* http://start.vertx.io/

----
jx import
----


== Jenkins X Roadmap

https://jenkins-x.io/contribute/roadmap/


== Try it out!

* https://jenkins-x.io/getting-started/
* JBUG Jenkins X Hands-on https://goo.gl/oBbHxA


== Thank you

image::jbugkorea_logotype_600px.gif[width="700"]

facebook.com/groups/jbossusergroup/


== References

* https://docs.google.com/presentation/d/1hwt2lFh3cCeFdP4xoT_stMPs0nh2xVZUtze6o79WfXc/edit#slide=id.p
* https://developer.okta.com/blog/2018/07/11/ci-cd-spring-boot-jenkins-x-kubernetes
* https://jenkins.io/blog/2018/03/19/introducing-jenkins-x/
* https://www.youtube.com/watch?v=uHe7R_iZSLU
* https://jenkins.io/blog/2018/07/19/jenkins-x-accelerate/


== References

* https://dzone.com/articles/jenkins-x-the-good-bad-and-ugly
* https://blog.octo.com/en/jenkinsx-new-kubernetes-dream-part-1/
* https://www.dropbox.com/s/2l3yudybl8dx4j7/2.pdf?dl=0
* http://www.itworld.co.kr/news/107527
* https://www.redhat.com/en/blog/integrating-ansible-jenkins-cicd-process



== References

* http://woowabros.github.io/experience/2018/06/26/bros-cicd.html
* https://dzone.com/articles/what-is-gitops-really
* https://jenkins-x.io/developing/git/#using-a-different-git-provider-for-environments
* JBUG Jenkins X Hands-on https://goo.gl/oBbHxA
